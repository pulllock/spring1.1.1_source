<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_05) on Thu Sep 30 22:16:09 GMT+01:00 2004 -->
<TITLE>
DataSourceUtils (Spring Framework)
</TITLE>

<META NAME="keywords" CONTENT="org.springframework.jdbc.datasource.DataSourceUtils class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="DataSourceUtils (Spring Framework)";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/DataSourceUtils.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/springframework/jdbc/datasource/DataSourceTransactionObject.html" title="class in org.springframework.jdbc.datasource"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/springframework/jdbc/datasource/DelegatingDataSource.html" title="class in org.springframework.jdbc.datasource"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DataSourceUtils.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.springframework.jdbc.datasource</FONT>
<BR>
Class DataSourceUtils</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by"><B>org.springframework.jdbc.datasource.DataSourceUtils</B>
</PRE>
<HR>
<DL>
<DT>public abstract class <B>DataSourceUtils</B><DT>extends java.lang.Object</DL>

<P>
Helper class that provides static methods to obtain connections from
 JNDI and close connections if necessary. Has support for thread-bound
 connections, e.g. for use with DataSourceTransactionManager.

 <p>Note: The <code>getDataSourceFromJndi</code> methods are targetted at
 applications that do not use a Spring BeanFactory. With the latter, it is
 preferable to preconfigure your beans or even JdbcTemplate instances in the
 factory: JndiObjectFactoryBean can be used to fetch a DataSource from JNDI
 and pass the DataSource bean reference to other beans. Switching to another
 DataSource is just a matter of configuration then: For example, you can
 replace the definition of the JndiObjectFactoryBean with a local DataSource
 (like a Commons DBCP BasicDataSource).
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Rod Johnson, Juergen Hoeller</DD>
<DT><B>See Also:</B><DD><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#getDataSourceFromJndi(java.lang.String)"><CODE>getDataSourceFromJndi(java.lang.String)</CODE></A>, 
<A HREF="../../../../org/springframework/jndi/JndiObjectFactoryBean.html" title="class in org.springframework.jndi"><CODE>JndiObjectFactoryBean</CODE></A>, 
<A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#getConnection(javax.sql.DataSource)"><CODE>getConnection(javax.sql.DataSource)</CODE></A>, 
<A HREF="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html" title="class in org.springframework.jdbc.datasource"><CODE>DataSourceTransactionManager</CODE></A></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#DataSourceUtils()">DataSourceUtils</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#applyTransactionTimeout(java.sql.Statement, javax.sql.DataSource)">applyTransactionTimeout</A></B>(java.sql.Statement&nbsp;stmt,
                        javax.sql.DataSource&nbsp;ds)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Apply the current transaction timeout, if any,
 to the given JDBC Statement object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#closeConnectionIfNecessary(java.sql.Connection, javax.sql.DataSource)">closeConnectionIfNecessary</A></B>(java.sql.Connection&nbsp;con,
                           javax.sql.DataSource&nbsp;ds)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close the given Connection if necessary, i.e. if it is not bound to the thread
 and it is not created by a SmartDataSource returning shouldClose=false.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#doCloseConnectionIfNecessary(java.sql.Connection, javax.sql.DataSource)">doCloseConnectionIfNecessary</A></B>(java.sql.Connection&nbsp;con,
                             javax.sql.DataSource&nbsp;ds)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Actually close a JDBC Connection for the given DataSource.
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;java.sql.Connection</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#doGetConnection(javax.sql.DataSource, boolean)">doGetConnection</A></B>(javax.sql.DataSource&nbsp;ds,
                boolean&nbsp;allowSynchronization)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Actually get a JDBC Connection for the given DataSource.
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.sql.Connection</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#getConnection(javax.sql.DataSource)">getConnection</A></B>(javax.sql.DataSource&nbsp;ds)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a Connection from the given DataSource. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.sql.Connection</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#getConnection(javax.sql.DataSource, boolean)">getConnection</A></B>(javax.sql.DataSource&nbsp;ds,
              boolean&nbsp;allowSynchronization)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a Connection from the given DataSource. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;javax.sql.DataSource</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#getDataSourceFromJndi(java.lang.String)">getDataSourceFromJndi</A></B>(java.lang.String&nbsp;jndiName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;<I>in favor of managing a DataSource via dependency injection,
 i.e. using a JndiObjectFactoryBean for a JNDI DataSource and pass a
 bean reference to a setDataSource(DataSource) method or the like</I></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;javax.sql.DataSource</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#getDataSourceFromJndi(java.lang.String, boolean)">getDataSourceFromJndi</A></B>(java.lang.String&nbsp;jndiName,
                      boolean&nbsp;resourceRef)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;<I>in favor of managing a DataSource via dependency injection,
 i.e. using a JndiObjectFactoryBean for a JNDI DataSource and pass a
 bean reference to a setDataSource(DataSource) method or the like</I></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.Integer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#prepareConnectionForTransaction(java.sql.Connection, org.springframework.transaction.TransactionDefinition)">prepareConnectionForTransaction</A></B>(java.sql.Connection&nbsp;con,
                                <A HREF="../../../../org/springframework/transaction/TransactionDefinition.html" title="interface in org.springframework.transaction">TransactionDefinition</A>&nbsp;definition)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prepare the given Connection with the given transaction semantics.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#resetConnectionAfterTransaction(java.sql.Connection, java.lang.Integer)">resetConnectionAfterTransaction</A></B>(java.sql.Connection&nbsp;con,
                                java.lang.Integer&nbsp;previousIsolationLevel)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reset the given Connection after a transaction,
 regarding read-only flag and isolation level.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="DataSourceUtils()"><!-- --></A><H3>
DataSourceUtils</H3>
<PRE>
public <B>DataSourceUtils</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="getDataSourceFromJndi(java.lang.String)"><!-- --></A><H3>
getDataSourceFromJndi</H3>
<PRE>
public static javax.sql.DataSource <B>getDataSourceFromJndi</B>(java.lang.String&nbsp;jndiName)
                                                  throws <A HREF="../../../../org/springframework/jdbc/CannotGetJdbcConnectionException.html" title="class in org.springframework.jdbc">CannotGetJdbcConnectionException</A></PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<I>in favor of managing a DataSource via dependency injection,
 i.e. using a JndiObjectFactoryBean for a JNDI DataSource and pass a
 bean reference to a setDataSource(DataSource) method or the like</I>
<P>
<DD>Look up the specified DataSource in JNDI, assuming that the lookup
 occurs in a J2EE container, i.e. adding the prefix "java:comp/env/"
 to the JNDI name if it doesn't already contain it.
 <p>Use getDataSourceFromJndi(jndiName,false) in case of a custom JNDI name.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>jndiName</CODE> - jndiName of the DataSource
<DT><B>Returns:</B><DD>the DataSource
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/springframework/jdbc/CannotGetJdbcConnectionException.html" title="class in org.springframework.jdbc">CannotGetJdbcConnectionException</A></CODE> - if the data source cannot be located<DT><B>See Also:</B><DD><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#getDataSourceFromJndi(java.lang.String, boolean)"><CODE>getDataSourceFromJndi(String, boolean)</CODE></A>, 
<A HREF="../../../../org/springframework/jndi/JndiObjectFactoryBean.html" title="class in org.springframework.jndi"><CODE>JndiObjectFactoryBean</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getDataSourceFromJndi(java.lang.String, boolean)"><!-- --></A><H3>
getDataSourceFromJndi</H3>
<PRE>
public static javax.sql.DataSource <B>getDataSourceFromJndi</B>(java.lang.String&nbsp;jndiName,
                                                         boolean&nbsp;resourceRef)
                                                  throws <A HREF="../../../../org/springframework/jdbc/CannotGetJdbcConnectionException.html" title="class in org.springframework.jdbc">CannotGetJdbcConnectionException</A></PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<I>in favor of managing a DataSource via dependency injection,
 i.e. using a JndiObjectFactoryBean for a JNDI DataSource and pass a
 bean reference to a setDataSource(DataSource) method or the like</I>
<P>
<DD>Look up the specified DataSource in JNDI, explicitly specifying
 if the lookup occurs in a J2EE container.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>jndiName</CODE> - jndiName of the DataSource<DD><CODE>resourceRef</CODE> - if the lookup occurs in a J2EE container, i.e. if the prefix
 "java:comp/env/" needs to be added if the JNDI name doesn't already contain it.
<DT><B>Returns:</B><DD>the DataSource
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/springframework/jdbc/CannotGetJdbcConnectionException.html" title="class in org.springframework.jdbc">CannotGetJdbcConnectionException</A></CODE> - if the data source cannot be located<DT><B>See Also:</B><DD><A HREF="../../../../org/springframework/jndi/JndiObjectFactoryBean.html" title="class in org.springframework.jndi"><CODE>JndiObjectFactoryBean</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getConnection(javax.sql.DataSource)"><!-- --></A><H3>
getConnection</H3>
<PRE>
public static java.sql.Connection <B>getConnection</B>(javax.sql.DataSource&nbsp;ds)
                                         throws <A HREF="../../../../org/springframework/jdbc/CannotGetJdbcConnectionException.html" title="class in org.springframework.jdbc">CannotGetJdbcConnectionException</A></PRE>
<DL>
<DD>Get a Connection from the given DataSource. Changes any SQL exception into
 the Spring hierarchy of unchecked generic data access exceptions, simplifying
 calling code and making any exception that is thrown more meaningful.
 <p>Is aware of a corresponding Connection bound to the current thread, for example
 when using DataSourceTransactionManager. Will bind a Connection to the thread
 if transaction synchronization is active (e.g. if in a JTA transaction).
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ds</CODE> - DataSource to get Connection from
<DT><B>Returns:</B><DD>a JDBC Connection from this DataSource
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/springframework/jdbc/CannotGetJdbcConnectionException.html" title="class in org.springframework.jdbc">CannotGetJdbcConnectionException</A></CODE> - if the attempt to get a Connection failed<DT><B>See Also:</B><DD><A HREF="../../../../org/springframework/transaction/support/TransactionSynchronizationManager.html" title="class in org.springframework.transaction.support"><CODE>TransactionSynchronizationManager</CODE></A>, 
<A HREF="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html" title="class in org.springframework.jdbc.datasource"><CODE>DataSourceTransactionManager</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getConnection(javax.sql.DataSource, boolean)"><!-- --></A><H3>
getConnection</H3>
<PRE>
public static java.sql.Connection <B>getConnection</B>(javax.sql.DataSource&nbsp;ds,
                                                boolean&nbsp;allowSynchronization)
                                         throws <A HREF="../../../../org/springframework/jdbc/CannotGetJdbcConnectionException.html" title="class in org.springframework.jdbc">CannotGetJdbcConnectionException</A></PRE>
<DL>
<DD>Get a Connection from the given DataSource. Changes any SQL exception into
 the Spring hierarchy of unchecked generic data access exceptions, simplifying
 calling code and making any exception that is thrown more meaningful.
 <p>Is aware of a corresponding Connection bound to the current thread, for example
 when using DataSourceTransactionManager. Will bind a Connection to the thread
 if transaction synchronization is active (e.g. if in a JTA transaction).
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ds</CODE> - DataSource to get Connection from<DD><CODE>allowSynchronization</CODE> - if a new JDBC Connection is supposed to be
 registered with transaction synchronization (if synchronization is active).
 This will always be true for typical data access code.
<DT><B>Returns:</B><DD>a JDBC Connection from this DataSource
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/springframework/jdbc/CannotGetJdbcConnectionException.html" title="class in org.springframework.jdbc">CannotGetJdbcConnectionException</A></CODE> - if the attempt to get a Connection failed<DT><B>See Also:</B><DD><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#doGetConnection(javax.sql.DataSource, boolean)"><CODE>doGetConnection(javax.sql.DataSource, boolean)</CODE></A>, 
<A HREF="../../../../org/springframework/transaction/support/TransactionSynchronizationManager.html" title="class in org.springframework.transaction.support"><CODE>TransactionSynchronizationManager</CODE></A>, 
<A HREF="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html" title="class in org.springframework.jdbc.datasource"><CODE>DataSourceTransactionManager</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="doGetConnection(javax.sql.DataSource, boolean)"><!-- --></A><H3>
doGetConnection</H3>
<PRE>
protected static java.sql.Connection <B>doGetConnection</B>(javax.sql.DataSource&nbsp;ds,
                                                     boolean&nbsp;allowSynchronization)
                                              throws java.sql.SQLException</PRE>
<DL>
<DD>Actually get a JDBC Connection for the given DataSource.
 Same as getConnection, but throwing the original SQLException.
 <p>Directly accessed by TransactionAwareDataSourceProxy.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE> - if thrown by JDBC methods<DT><B>See Also:</B><DD><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#getConnection(javax.sql.DataSource, boolean)"><CODE>getConnection(DataSource, boolean)</CODE></A>, 
<A HREF="../../../../org/springframework/jdbc/datasource/TransactionAwareDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><CODE>TransactionAwareDataSourceProxy</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="prepareConnectionForTransaction(java.sql.Connection, org.springframework.transaction.TransactionDefinition)"><!-- --></A><H3>
prepareConnectionForTransaction</H3>
<PRE>
public static java.lang.Integer <B>prepareConnectionForTransaction</B>(java.sql.Connection&nbsp;con,
                                                                <A HREF="../../../../org/springframework/transaction/TransactionDefinition.html" title="interface in org.springframework.transaction">TransactionDefinition</A>&nbsp;definition)
                                                         throws java.sql.SQLException</PRE>
<DL>
<DD>Prepare the given Connection with the given transaction semantics.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - Connection to prepare<DD><CODE>definition</CODE> - the transaction definition to apply
<DT><B>Returns:</B><DD>the previous isolation level, if any
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE> - if thrown by JDBC methods<DT><B>See Also:</B><DD><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#resetConnectionAfterTransaction(java.sql.Connection, java.lang.Integer)"><CODE>resetConnectionAfterTransaction(java.sql.Connection, java.lang.Integer)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="resetConnectionAfterTransaction(java.sql.Connection, java.lang.Integer)"><!-- --></A><H3>
resetConnectionAfterTransaction</H3>
<PRE>
public static void <B>resetConnectionAfterTransaction</B>(java.sql.Connection&nbsp;con,
                                                   java.lang.Integer&nbsp;previousIsolationLevel)</PRE>
<DL>
<DD>Reset the given Connection after a transaction,
 regarding read-only flag and isolation level.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - Conneciton to reset<DD><CODE>previousIsolationLevel</CODE> - the isolation level to restore, if any<DT><B>See Also:</B><DD><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#prepareConnectionForTransaction(java.sql.Connection, org.springframework.transaction.TransactionDefinition)"><CODE>prepareConnectionForTransaction(java.sql.Connection, org.springframework.transaction.TransactionDefinition)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="applyTransactionTimeout(java.sql.Statement, javax.sql.DataSource)"><!-- --></A><H3>
applyTransactionTimeout</H3>
<PRE>
public static void <B>applyTransactionTimeout</B>(java.sql.Statement&nbsp;stmt,
                                           javax.sql.DataSource&nbsp;ds)
                                    throws java.sql.SQLException</PRE>
<DL>
<DD>Apply the current transaction timeout, if any,
 to the given JDBC Statement object.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>stmt</CODE> - the JDBC Statement object<DD><CODE>ds</CODE> - DataSource that the Connection came from
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="closeConnectionIfNecessary(java.sql.Connection, javax.sql.DataSource)"><!-- --></A><H3>
closeConnectionIfNecessary</H3>
<PRE>
public static void <B>closeConnectionIfNecessary</B>(java.sql.Connection&nbsp;con,
                                              javax.sql.DataSource&nbsp;ds)</PRE>
<DL>
<DD>Close the given Connection if necessary, i.e. if it is not bound to the thread
 and it is not created by a SmartDataSource returning shouldClose=false.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - Connection to close if necessary
 (if this is null, the call will be ignored)<DD><CODE>ds</CODE> - DataSource that the Connection came from<DT><B>See Also:</B><DD><A HREF="../../../../org/springframework/jdbc/datasource/SmartDataSource.html#shouldClose(java.sql.Connection)"><CODE>SmartDataSource.shouldClose(java.sql.Connection)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="doCloseConnectionIfNecessary(java.sql.Connection, javax.sql.DataSource)"><!-- --></A><H3>
doCloseConnectionIfNecessary</H3>
<PRE>
protected static void <B>doCloseConnectionIfNecessary</B>(java.sql.Connection&nbsp;con,
                                                   javax.sql.DataSource&nbsp;ds)
                                            throws java.sql.SQLException</PRE>
<DL>
<DD>Actually close a JDBC Connection for the given DataSource.
 Same as closeConnectionIfNecessary, but throwing the original SQLException.
 <p>Directly accessed by TransactionAwareDataSourceProxy.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE> - if thrown by JDBC methods<DT><B>See Also:</B><DD><A HREF="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#closeConnectionIfNecessary(java.sql.Connection, javax.sql.DataSource)"><CODE>closeConnectionIfNecessary(java.sql.Connection, javax.sql.DataSource)</CODE></A>, 
<A HREF="../../../../org/springframework/jdbc/datasource/TransactionAwareDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><CODE>TransactionAwareDataSourceProxy</CODE></A></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/DataSourceUtils.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/springframework/jdbc/datasource/DataSourceTransactionObject.html" title="class in org.springframework.jdbc.datasource"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/springframework/jdbc/datasource/DelegatingDataSource.html" title="class in org.springframework.jdbc.datasource"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DataSourceUtils.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<i>Copyright (C) 2003-2004 The Spring Framework Project.</i>
</BODY>
</HTML>
